e4b27b97526ced71ce130a6b04e4fb22
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var SyntheticError = function (_Error) {
  (0, _inherits2.default)(SyntheticError, _Error);
  var _super = _createSuper(SyntheticError);
  function SyntheticError() {
    var _this;
    (0, _classCallCheck2.default)(this, SyntheticError);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this.name = '';
    return _this;
  }
  return (0, _createClass2.default)(SyntheticError);
}((0, _wrapNativeSuper2.default)(Error));
var userExceptionDecorator;
var inUserExceptionDecorator = false;
var decoratedExtraDataKey = Symbol('decoratedExtraDataKey');
function unstable_setExceptionDecorator(exceptionDecorator) {
  userExceptionDecorator = exceptionDecorator;
}
function preprocessException(data) {
  if (userExceptionDecorator && !inUserExceptionDecorator) {
    inUserExceptionDecorator = true;
    try {
      return userExceptionDecorator(data);
    } catch (_unused) {} finally {
      inUserExceptionDecorator = false;
    }
  }
  return data;
}
var exceptionID = 0;
function reportException(e, isFatal, reportToConsole) {
  var parseErrorStack = require('./Devtools/parseErrorStack');
  var stack = parseErrorStack(e == null ? void 0 : e.stack);
  var currentExceptionID = ++exceptionID;
  var originalMessage = e.message || '';
  var message = originalMessage;
  if (e.componentStack != null) {
    message += "\n\nThis error is located at:" + e.componentStack;
  }
  var namePrefix = e.name == null || e.name === '' ? '' : e.name + ": ";
  if (!message.startsWith(namePrefix)) {
    message = namePrefix + message;
  }
  message = e.jsEngine == null ? message : message + ", js engine: " + e.jsEngine;
  var data = preprocessException({
    message: message,
    originalMessage: message === originalMessage ? null : originalMessage,
    name: e.name == null || e.name === '' ? null : e.name,
    componentStack: typeof e.componentStack === 'string' ? e.componentStack : null,
    stack: stack,
    id: currentExceptionID,
    isFatal: isFatal,
    extraData: Object.assign({}, e[decoratedExtraDataKey], {
      jsEngine: e.jsEngine,
      rawStack: e.stack
    })
  });
  if (reportToConsole) {
    console.error(data.message);
  }
  if (__DEV__) {
    var LogBox = require('../LogBox/LogBox');
    LogBox.addException(Object.assign({}, data, {
      isComponentError: !!e.isComponentError
    }));
  } else if (isFatal || e.type !== 'warn') {
    var NativeExceptionsManager = require('./NativeExceptionsManager').default;
    if (NativeExceptionsManager) {
      NativeExceptionsManager.reportException(data);
    }
  }
}
var inExceptionHandler = false;
function handleException(e, isFatal) {
  var error;
  if (e instanceof Error) {
    error = e;
  } else {
    error = new SyntheticError(e);
  }
  try {
    inExceptionHandler = true;
    reportException(error, isFatal, true);
  } finally {
    inExceptionHandler = false;
  }
}
function reactConsoleErrorHandler() {
  var _console;
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }
  (_console = console)._errorOriginal.apply(_console, args);
  if (!console.reportErrorsAsExceptions) {
    return;
  }
  if (inExceptionHandler) {
    return;
  }
  var error;
  var firstArg = args[0];
  if (firstArg != null && firstArg.stack) {
    error = firstArg;
  } else {
    var stringifySafe = require('../Utilities/stringifySafe').default;
    if (typeof firstArg === 'string' && firstArg.startsWith('Warning: ')) {
      return;
    }
    var message = args.map(function (arg) {
      return typeof arg === 'string' ? arg : stringifySafe(arg);
    }).join(' ');
    error = new SyntheticError(message);
    error.name = 'console.error';
  }
  reportException(error, false, false);
}
function installConsoleErrorReporter() {
  if (console._errorOriginal) {
    return;
  }
  console._errorOriginal = console.error.bind(console);
  console.error = reactConsoleErrorHandler;
  if (console.reportErrorsAsExceptions === undefined) {
    console.reportErrorsAsExceptions = true;
  }
}
module.exports = {
  decoratedExtraDataKey: decoratedExtraDataKey,
  handleException: handleException,
  installConsoleErrorReporter: installConsoleErrorReporter,
  SyntheticError: SyntheticError,
  unstable_setExceptionDecorator: unstable_setExceptionDecorator
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTeW50aGV0aWNFcnJvciIsIm5hbWUiLCJFcnJvciIsInVzZXJFeGNlcHRpb25EZWNvcmF0b3IiLCJpblVzZXJFeGNlcHRpb25EZWNvcmF0b3IiLCJkZWNvcmF0ZWRFeHRyYURhdGFLZXkiLCJTeW1ib2wiLCJ1bnN0YWJsZV9zZXRFeGNlcHRpb25EZWNvcmF0b3IiLCJleGNlcHRpb25EZWNvcmF0b3IiLCJwcmVwcm9jZXNzRXhjZXB0aW9uIiwiZGF0YSIsImV4Y2VwdGlvbklEIiwicmVwb3J0RXhjZXB0aW9uIiwiZSIsImlzRmF0YWwiLCJyZXBvcnRUb0NvbnNvbGUiLCJwYXJzZUVycm9yU3RhY2siLCJyZXF1aXJlIiwic3RhY2siLCJjdXJyZW50RXhjZXB0aW9uSUQiLCJvcmlnaW5hbE1lc3NhZ2UiLCJtZXNzYWdlIiwiY29tcG9uZW50U3RhY2siLCJuYW1lUHJlZml4Iiwic3RhcnRzV2l0aCIsImpzRW5naW5lIiwiaWQiLCJleHRyYURhdGEiLCJyYXdTdGFjayIsImNvbnNvbGUiLCJlcnJvciIsIl9fREVWX18iLCJMb2dCb3giLCJhZGRFeGNlcHRpb24iLCJpc0NvbXBvbmVudEVycm9yIiwidHlwZSIsIk5hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyIiwiZGVmYXVsdCIsImluRXhjZXB0aW9uSGFuZGxlciIsImhhbmRsZUV4Y2VwdGlvbiIsInJlYWN0Q29uc29sZUVycm9ySGFuZGxlciIsImFyZ3MiLCJfZXJyb3JPcmlnaW5hbCIsInJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucyIsImZpcnN0QXJnIiwic3RyaW5naWZ5U2FmZSIsIm1hcCIsImFyZyIsImpvaW4iLCJpbnN0YWxsQ29uc29sZUVycm9yUmVwb3J0ZXIiLCJiaW5kIiwidW5kZWZpbmVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkV4Y2VwdGlvbnNNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvdyBzdHJpY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtFeHRlbmRlZEVycm9yfSBmcm9tICcuL0V4dGVuZGVkRXJyb3InO1xuaW1wb3J0IHR5cGUge0V4Y2VwdGlvbkRhdGF9IGZyb20gJy4vTmF0aXZlRXhjZXB0aW9uc01hbmFnZXInO1xuXG5jbGFzcyBTeW50aGV0aWNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZTogc3RyaW5nID0gJyc7XG59XG5cbnR5cGUgRXhjZXB0aW9uRGVjb3JhdG9yID0gRXhjZXB0aW9uRGF0YSA9PiBFeGNlcHRpb25EYXRhO1xuXG5sZXQgdXNlckV4Y2VwdGlvbkRlY29yYXRvcjogP0V4Y2VwdGlvbkRlY29yYXRvcjtcbmxldCBpblVzZXJFeGNlcHRpb25EZWNvcmF0b3IgPSBmYWxzZTtcblxuLy8gVGhpcyBTeW1ib2wgaXMgdXNlZCB0byBkZWNvcmF0ZSBhbiBFeHRlbmRlZEVycm9yIHdpdGggZXh0cmEgZGF0YSBpbiBzZWxlY3QgdXNlY2FzZXMuXG4vLyBOb3RlIHRoYXQgZGF0YSBwYXNzZWQgdXNpbmcgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIHN0cmljdGx5IGNvbnRhaW5lZCxcbi8vIGFzIGRhdGEgdGhhdCdzIG5vdCBzZXJpYWxpemFibGUvdG9vIGxhcmdlIG1heSBjYXVzZSBpc3N1ZXMgd2l0aCBwYXNzaW5nIHRoZSBlcnJvciB0byB0aGUgbmF0aXZlIGNvZGUuXG5jb25zdCBkZWNvcmF0ZWRFeHRyYURhdGFLZXk6IHN5bWJvbCA9IFN5bWJvbCgnZGVjb3JhdGVkRXh0cmFEYXRhS2V5Jyk7XG5cbi8qKlxuICogQWxsb3dzIHRoZSBhcHAgdG8gYWRkIGluZm9ybWF0aW9uIHRvIHRoZSBleGNlcHRpb24gcmVwb3J0IGJlZm9yZSBpdCBpcyBzZW50XG4gKiB0byBuYXRpdmUuIFRoaXMgQVBJIGlzIG5vdCBmaW5hbC5cbiAqL1xuXG5mdW5jdGlvbiB1bnN0YWJsZV9zZXRFeGNlcHRpb25EZWNvcmF0b3IoXG4gIGV4Y2VwdGlvbkRlY29yYXRvcjogP0V4Y2VwdGlvbkRlY29yYXRvcixcbikge1xuICB1c2VyRXhjZXB0aW9uRGVjb3JhdG9yID0gZXhjZXB0aW9uRGVjb3JhdG9yO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzRXhjZXB0aW9uKGRhdGE6IEV4Y2VwdGlvbkRhdGEpOiBFeGNlcHRpb25EYXRhIHtcbiAgaWYgKHVzZXJFeGNlcHRpb25EZWNvcmF0b3IgJiYgIWluVXNlckV4Y2VwdGlvbkRlY29yYXRvcikge1xuICAgIGluVXNlckV4Y2VwdGlvbkRlY29yYXRvciA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB1c2VyRXhjZXB0aW9uRGVjb3JhdG9yKGRhdGEpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gRmFsbCB0aHJvdWdoXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGluVXNlckV4Y2VwdGlvbkRlY29yYXRvciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXZlbG9wZXItdmlzaWJsZSBhc3BlY3Qgb2YgZXJyb3JzIGFuZCBleGNlcHRpb25zXG4gKi9cbmxldCBleGNlcHRpb25JRCA9IDA7XG5mdW5jdGlvbiByZXBvcnRFeGNlcHRpb24oXG4gIGU6IEV4dGVuZGVkRXJyb3IsXG4gIGlzRmF0YWw6IGJvb2xlYW4sXG4gIHJlcG9ydFRvQ29uc29sZTogYm9vbGVhbiwgLy8gb25seSB0cnVlIHdoZW4gY29taW5nIGZyb20gaGFuZGxlRXhjZXB0aW9uOyB0aGUgZXJyb3IgaGFzIG5vdCB5ZXQgYmVlbiBsb2dnZWRcbikge1xuICBjb25zdCBwYXJzZUVycm9yU3RhY2sgPSByZXF1aXJlKCcuL0RldnRvb2xzL3BhcnNlRXJyb3JTdGFjaycpO1xuICBjb25zdCBzdGFjayA9IHBhcnNlRXJyb3JTdGFjayhlPy5zdGFjayk7XG4gIGNvbnN0IGN1cnJlbnRFeGNlcHRpb25JRCA9ICsrZXhjZXB0aW9uSUQ7XG4gIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IGUubWVzc2FnZSB8fCAnJztcbiAgbGV0IG1lc3NhZ2UgPSBvcmlnaW5hbE1lc3NhZ2U7XG4gIGlmIChlLmNvbXBvbmVudFN0YWNrICE9IG51bGwpIHtcbiAgICBtZXNzYWdlICs9IGBcXG5cXG5UaGlzIGVycm9yIGlzIGxvY2F0ZWQgYXQ6JHtlLmNvbXBvbmVudFN0YWNrfWA7XG4gIH1cbiAgY29uc3QgbmFtZVByZWZpeCA9IGUubmFtZSA9PSBudWxsIHx8IGUubmFtZSA9PT0gJycgPyAnJyA6IGAke2UubmFtZX06IGA7XG5cbiAgaWYgKCFtZXNzYWdlLnN0YXJ0c1dpdGgobmFtZVByZWZpeCkpIHtcbiAgICBtZXNzYWdlID0gbmFtZVByZWZpeCArIG1lc3NhZ2U7XG4gIH1cblxuICBtZXNzYWdlID1cbiAgICBlLmpzRW5naW5lID09IG51bGwgPyBtZXNzYWdlIDogYCR7bWVzc2FnZX0sIGpzIGVuZ2luZTogJHtlLmpzRW5naW5lfWA7XG5cbiAgY29uc3QgZGF0YSA9IHByZXByb2Nlc3NFeGNlcHRpb24oe1xuICAgIG1lc3NhZ2UsXG4gICAgb3JpZ2luYWxNZXNzYWdlOiBtZXNzYWdlID09PSBvcmlnaW5hbE1lc3NhZ2UgPyBudWxsIDogb3JpZ2luYWxNZXNzYWdlLFxuICAgIG5hbWU6IGUubmFtZSA9PSBudWxsIHx8IGUubmFtZSA9PT0gJycgPyBudWxsIDogZS5uYW1lLFxuICAgIGNvbXBvbmVudFN0YWNrOlxuICAgICAgdHlwZW9mIGUuY29tcG9uZW50U3RhY2sgPT09ICdzdHJpbmcnID8gZS5jb21wb25lbnRTdGFjayA6IG51bGwsXG4gICAgc3RhY2ssXG4gICAgaWQ6IGN1cnJlbnRFeGNlcHRpb25JRCxcbiAgICBpc0ZhdGFsLFxuICAgIGV4dHJhRGF0YToge1xuICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXSB3ZSBjYW4ndCBkZWZpbmUgYSB0eXBlIHdpdGggYSBTeW1ib2wta2V5ZWQgZmllbGQgaW4gZmxvd1xuICAgICAgLi4uZVtkZWNvcmF0ZWRFeHRyYURhdGFLZXldLFxuICAgICAganNFbmdpbmU6IGUuanNFbmdpbmUsXG4gICAgICByYXdTdGFjazogZS5zdGFjayxcbiAgICB9LFxuICB9KTtcblxuICBpZiAocmVwb3J0VG9Db25zb2xlKSB7XG4gICAgLy8gd2UgZmVlZCBiYWNrIGludG8gY29uc29sZS5lcnJvciwgdG8gbWFrZSBzdXJlIGFueSBtZXRob2RzIHRoYXQgYXJlXG4gICAgLy8gbW9ua2V5IHBhdGNoZWQgb24gdG9wIG9mIGNvbnNvbGUuZXJyb3IgYXJlIGNhbGxlZCB3aGVuIGNvbWluZyBmcm9tXG4gICAgLy8gaGFuZGxlRXhjZXB0aW9uXG4gICAgY29uc29sZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKF9fREVWX18pIHtcbiAgICBjb25zdCBMb2dCb3ggPSByZXF1aXJlKCcuLi9Mb2dCb3gvTG9nQm94Jyk7XG4gICAgTG9nQm94LmFkZEV4Y2VwdGlvbih7XG4gICAgICAuLi5kYXRhLFxuICAgICAgaXNDb21wb25lbnRFcnJvcjogISFlLmlzQ29tcG9uZW50RXJyb3IsXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNGYXRhbCB8fCBlLnR5cGUgIT09ICd3YXJuJykge1xuICAgIGNvbnN0IE5hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyID1cbiAgICAgIHJlcXVpcmUoJy4vTmF0aXZlRXhjZXB0aW9uc01hbmFnZXInKS5kZWZhdWx0O1xuICAgIGlmIChOYXRpdmVFeGNlcHRpb25zTWFuYWdlcikge1xuICAgICAgTmF0aXZlRXhjZXB0aW9uc01hbmFnZXIucmVwb3J0RXhjZXB0aW9uKGRhdGEpO1xuICAgIH1cbiAgfVxufVxuXG5kZWNsYXJlIHZhciBjb25zb2xlOiB0eXBlb2YgY29uc29sZSAmIHtcbiAgX2Vycm9yT3JpZ2luYWw6IHR5cGVvZiBjb25zb2xlLmVycm9yLFxuICByZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnM6IGJvb2xlYW4sXG4gIC4uLlxufTtcblxuLy8gSWYgd2UgdHJpZ2dlciBjb25zb2xlLmVycm9yIF9mcm9tXyBoYW5kbGVFeGNlcHRpb24sXG4vLyB3ZSBkbyB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGNvbnNvbGUuZXJyb3IgZG9lc24ndCB0cmlnZ2VyIGVycm9yIHJlcG9ydGluZyBhZ2FpblxubGV0IGluRXhjZXB0aW9uSGFuZGxlciA9IGZhbHNlO1xuXG4vKipcbiAqIExvZ3MgZXhjZXB0aW9ucyB0byB0aGUgKG5hdGl2ZSkgY29uc29sZSBhbmQgZGlzcGxheXMgdGhlbVxuICovXG5mdW5jdGlvbiBoYW5kbGVFeGNlcHRpb24oZTogbWl4ZWQsIGlzRmF0YWw6IGJvb2xlYW4pIHtcbiAgbGV0IGVycm9yOiBFcnJvcjtcbiAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIGVycm9yID0gZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBXb3JrYXJvdW5kIGZvciByZXBvcnRpbmcgZXJyb3JzIGNhdXNlZCBieSBgdGhyb3cgJ3NvbWUgc3RyaW5nJ2BcbiAgICAvLyBVbmZvcnR1bmF0ZWx5IHRoZXJlIGlzIG5vIHdheSB0byBmaWd1cmUgb3V0IHRoZSBzdGFja3RyYWNlIGluIHRoaXNcbiAgICAvLyBjYXNlLCBzbyBpZiB5b3UgZW5kZWQgdXAgaGVyZSB0cnlpbmcgdG8gdHJhY2UgYW4gZXJyb3IsIGxvb2sgZm9yXG4gICAgLy8gYHRocm93ICc8ZXJyb3IgbWVzc2FnZT4nYCBzb21ld2hlcmUgaW4geW91ciBjb2RlYmFzZS5cbiAgICBlcnJvciA9IG5ldyBTeW50aGV0aWNFcnJvcihlKTtcbiAgfVxuICB0cnkge1xuICAgIGluRXhjZXB0aW9uSGFuZGxlciA9IHRydWU7XG4gICAgLyogJEZsb3dGaXhNZVtjbGFzcy1vYmplY3Qtc3VidHlwaW5nXSBhZGRlZCB3aGVuIGltcHJvdmluZyB0eXBpbmcgZm9yIHRoaXNcbiAgICAgKiBwYXJhbWV0ZXJzICovXG4gICAgcmVwb3J0RXhjZXB0aW9uKGVycm9yLCBpc0ZhdGFsLCAvKnJlcG9ydFRvQ29uc29sZSovIHRydWUpO1xuICB9IGZpbmFsbHkge1xuICAgIGluRXhjZXB0aW9uSGFuZGxlciA9IGZhbHNlO1xuICB9XG59XG5cbi8qICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF0gVGhlIHR5cGUgYW5ub3RhdGlvbihzKSByZXF1aXJlZCBieSBGbG93J3NcbiAqIExUSSB1cGRhdGUgY291bGQgbm90IGJlIGFkZGVkIHZpYSBjb2RlbW9kICovXG5mdW5jdGlvbiByZWFjdENvbnNvbGVFcnJvckhhbmRsZXIoLi4uYXJncykge1xuICAvLyBidWJibGUgdXAgdG8gYW55IG9yaWdpbmFsIGhhbmRsZXJzXG4gIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwoLi4uYXJncyk7XG4gIGlmICghY29uc29sZS5yZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGluRXhjZXB0aW9uSGFuZGxlcikge1xuICAgIC8vIFRoZSBmdW5kYW1lbnRhbCB0cmljayBoZXJlIGlzIHRoYXQgYXJlIG11bHRpcGxlIGVudHJ5IHBvaW50IHRvIGxvZ2dpbmcgZXJyb3JzOlxuICAgIC8vIChzZWUgRDE5NzQzMDc1IGZvciBtb3JlIGJhY2tncm91bmQpXG4gICAgLy9cbiAgICAvLyAxLiBBbiB1bmNhdWdodCBleGNlcHRpb24gYmVpbmcgY2F1Z2h0IGJ5IHRoZSBnbG9iYWwgaGFuZGxlclxuICAgIC8vIDIuIEFuIGVycm9yIGJlaW5nIGxvZ2dlZCB0aHJvdyBjb25zb2xlLmVycm9yXG4gICAgLy9cbiAgICAvLyBIb3dldmVyLCBjb25zb2xlLmVycm9yIGlzIG1vbmtleSBwYXRjaGVkIG11bHRpcGxlIHRpbWVzOiBieSB0aGlzIG1vZHVsZSwgYW5kIGJ5IHRoZVxuICAgIC8vIERldlRvb2xzIHNldHVwIHRoYXQgc2VuZHMgbWVzc2FnZXMgdG8gTWV0cm8uXG4gICAgLy8gVGhlIHBhdGNoaW5nIG9yZGVyIGNhbm5vdCBiZSByZWxpZWQgdXBvbi5cbiAgICAvL1xuICAgIC8vIFNvLCBzb21lIHNjZW5hcmlvcyB0aGF0IGFyZSBoYW5kbGVkIGJ5IHRoaXMgZmxhZzpcbiAgICAvL1xuICAgIC8vIExvZ2dpbmcgYW4gZXJyb3I6XG4gICAgLy8gMS4gY29uc29sZS5lcnJvciBjYWxsZWQgZnJvbSB1c2VyIGNvZGVcbiAgICAvLyAyLiAocG9zc2libHkpIGFycml2ZXMgX2ZpcnN0XyBhdCBEZXZUb29sIGhhbmRsZXIsIHNlbmQgdG8gTWV0cm9cbiAgICAvLyAzLiBCdWJibGVzIHRvIGhlcmVcbiAgICAvLyA0LiBnb2VzIGludG8gcmVwb3J0IEV4Y2VwdGlvbi5cbiAgICAvLyA1LiBzaG91bGQgbm90IHRyaWdnZXIgY29uc29sZS5lcnJvciBhZ2FpbiwgdG8gYXZvaWQgbG9vcGluZyAvIGxvZ2dpbmcgdHdpY2VcbiAgICAvLyA2LiBzaG91bGQgc3RpbGwgYnViYmxlIHVwIHRvIG9yaWdpbmFsIGNvbnNvbGVcbiAgICAvLyAgICAod2hpY2ggbWlnaHQgZWl0aGVyIGJlIGNvbnNvbGUubG9nLCBvciB0aGUgRGV2VG9vbHMgaGFuZGxlciBpbiBjYXNlIGl0IHBhdGNoZWQgX2VhcmxpZXJfIGFuZCAoMikgZGlkbid0IGhhcHBlbilcbiAgICAvL1xuICAgIC8vIFRocm93aW5nIGFuIHVuY2F1Z2h0IGV4Y2VwdGlvbjpcbiAgICAvLyAxLiBleGNlcHRpb24gdGhyb3duXG4gICAgLy8gMi4gcGlja2VkIHVwIGJ5IGhhbmRsZUV4Y2VwdGlvblxuICAgIC8vIDMuIHNob3VsZCBiZSBzZW5kIHRvIGNvbnNvbGUuZXJyb3IgKG5vdCBjb25zb2xlLl9lcnJvck9yaWdpbmFsLCBhcyBEZXZUb29scyBtaWdodCBoYXZlIHBhdGNoZWQgX2xhdGVyXyBhbmQgaXQgbmVlZHMgdG8gc2VuZCBpdCB0byBNZXRybylcbiAgICAvLyA0LiB0aGF0IF9taWdodF8gYnViYmxlIGFnYWluIHRvIHRoZSBgcmVhY3RDb25zb2xlRXJyb3JIYW5kbGVgIGRlZmluZWQgaGVyZVxuICAgIC8vICAgIC0+IHNob3VsZCBub3QgaGFuZGxlIGV4Y2VwdGlvbiBfYWdhaW5fLCB0byBhdm9pZCBsb29waW5nIC8gc2hvd2luZyB0d2ljZSAodGhpcyBjb2RlIGJyYW5jaClcbiAgICAvLyA1LiBzaG91bGQgc3RpbGwgYnViYmxlIHVwIHRvIG9yaWdpbmFsIGNvbnNvbGUgKHdoaWNoIG1pZ2h0IGVpdGhlciBiZSBjb25zb2xlLmxvZywgb3IgdGhlIERldlRvb2xzIGhhbmRsZXIgaW4gY2FzZSB0aGF0IG9uZSBwYXRjaGVkIF9lYXJsaWVyXylcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgZXJyb3I7XG5cbiAgY29uc3QgZmlyc3RBcmcgPSBhcmdzWzBdO1xuICBpZiAoZmlyc3RBcmc/LnN0YWNrKSB7XG4gICAgLy8gcmVwb3J0RXhjZXB0aW9uIHdpbGwgY29uc29sZS5lcnJvciB0aGlzIHdpdGggaGlnaCBlbm91Z2ggZmlkZWxpdHkuXG4gICAgZXJyb3IgPSBmaXJzdEFyZztcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdHJpbmdpZnlTYWZlID0gcmVxdWlyZSgnLi4vVXRpbGl0aWVzL3N0cmluZ2lmeVNhZmUnKS5kZWZhdWx0O1xuICAgIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdzdHJpbmcnICYmIGZpcnN0QXJnLnN0YXJ0c1dpdGgoJ1dhcm5pbmc6ICcpKSB7XG4gICAgICAvLyBSZWFjdCB3YXJuaW5ncyB1c2UgY29uc29sZS5lcnJvciBzbyB0aGF0IGEgc3RhY2sgdHJhY2UgaXMgc2hvd24sIGJ1dFxuICAgICAgLy8gd2UgZG9uJ3QgKGN1cnJlbnRseSkgd2FudCB0aGVzZSB0byBzaG93IGEgcmVkYm94XG4gICAgICAvLyAoTm90ZTogTG9naWMgZHVwbGljYXRlZCBpbiBwb2x5ZmlsbHMvY29uc29sZS5qcy4pXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXG4gICAgICAubWFwKGFyZyA9PiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgPyBhcmcgOiBzdHJpbmdpZnlTYWZlKGFyZykpKVxuICAgICAgLmpvaW4oJyAnKTtcblxuICAgIGVycm9yID0gbmV3IFN5bnRoZXRpY0Vycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9yLm5hbWUgPSAnY29uc29sZS5lcnJvcic7XG4gIH1cblxuICByZXBvcnRFeGNlcHRpb24oXG4gICAgLyogJEZsb3dGaXhNZVtjbGFzcy1vYmplY3Qtc3VidHlwaW5nXSBhZGRlZCB3aGVuIGltcHJvdmluZyB0eXBpbmcgZm9yIHRoaXNcbiAgICAgKiBwYXJhbWV0ZXJzICovXG4gICAgZXJyb3IsXG4gICAgZmFsc2UsIC8vIGlzRmF0YWxcbiAgICBmYWxzZSwgLy8gcmVwb3J0VG9Db25zb2xlXG4gICk7XG59XG5cbi8qKlxuICogU2hvd3MgYSByZWRib3ggd2l0aCBzdGFja3RyYWNlIGZvciBhbGwgY29uc29sZS5lcnJvciBtZXNzYWdlcy4gIERpc2FibGUgYnlcbiAqIHNldHRpbmcgYGNvbnNvbGUucmVwb3J0RXJyb3JzQXNFeGNlcHRpb25zID0gZmFsc2U7YCBpbiB5b3VyIGFwcC5cbiAqL1xuZnVuY3Rpb24gaW5zdGFsbENvbnNvbGVFcnJvclJlcG9ydGVyKCkge1xuICAvLyBFbmFibGUgcmVwb3J0RXJyb3JzQXNFeGNlcHRpb25zXG4gIGlmIChjb25zb2xlLl9lcnJvck9yaWdpbmFsKSB7XG4gICAgcmV0dXJuOyAvLyBhbHJlYWR5IGluc3RhbGxlZFxuICB9XG4gIC8vIEZsb3cgZG9lc24ndCBsaWtlIGl0IHdoZW4geW91IHNldCBhcmJpdHJhcnkgdmFsdWVzIG9uIGEgZ2xvYmFsIG9iamVjdFxuICBjb25zb2xlLl9lcnJvck9yaWdpbmFsID0gY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpO1xuICBjb25zb2xlLmVycm9yID0gcmVhY3RDb25zb2xlRXJyb3JIYW5kbGVyO1xuICBpZiAoY29uc29sZS5yZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIEluZGl2aWR1YWwgYXBwcyBjYW4gZGlzYWJsZSB0aGlzXG4gICAgLy8gRmxvdyBkb2Vzbid0IGxpa2UgaXQgd2hlbiB5b3Ugc2V0IGFyYml0cmFyeSB2YWx1ZXMgb24gYSBnbG9iYWwgb2JqZWN0XG4gICAgY29uc29sZS5yZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMgPSB0cnVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZWNvcmF0ZWRFeHRyYURhdGFLZXksXG4gIGhhbmRsZUV4Y2VwdGlvbixcbiAgaW5zdGFsbENvbnNvbGVFcnJvclJlcG9ydGVyLFxuICBTeW50aGV0aWNFcnJvcixcbiAgdW5zdGFibGVfc2V0RXhjZXB0aW9uRGVjb3JhdG9yLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFBQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtQQSxjQUFjO0VBQUE7RUFBQTtFQUFBO0lBQUE7SUFBQTtJQUFBO01BQUE7SUFBQTtJQUFBO0lBQUEsTUFDbEJDLElBQUksR0FBVyxFQUFFO0lBQUE7RUFBQTtFQUFBO0FBQUEsaUNBRFVDLEtBQUs7QUFNbEMsSUFBSUMsc0JBQTJDO0FBQy9DLElBQUlDLHdCQUF3QixHQUFHLEtBQUs7QUFLcEMsSUFBTUMscUJBQTZCLEdBQUdDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztBQU9yRSxTQUFTQyw4QkFBOEIsQ0FDckNDLGtCQUF1QyxFQUN2QztFQUNBTCxzQkFBc0IsR0FBR0ssa0JBQWtCO0FBQzdDO0FBRUEsU0FBU0MsbUJBQW1CLENBQUNDLElBQW1CLEVBQWlCO0VBQy9ELElBQUlQLHNCQUFzQixJQUFJLENBQUNDLHdCQUF3QixFQUFFO0lBQ3ZEQSx3QkFBd0IsR0FBRyxJQUFJO0lBQy9CLElBQUk7TUFDRixPQUFPRCxzQkFBc0IsQ0FBQ08sSUFBSSxDQUFDO0lB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