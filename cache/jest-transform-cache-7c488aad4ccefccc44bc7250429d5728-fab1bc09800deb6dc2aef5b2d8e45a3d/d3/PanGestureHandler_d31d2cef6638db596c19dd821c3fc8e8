ce5a84b37f805aeebf37587d2cb73363
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");
var _toConsumableArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/toConsumableArray"));
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.managePanProps = managePanProps;
exports.PanGestureHandler = exports.panHandlerName = exports.panGestureHandlerCustomNativeProps = exports.panGestureHandlerProps = void 0;
var _createHandler = _interopRequireDefault(require("./createHandler"));
var _gestureHandlerCommon = require("./gestureHandlerCommon");
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
var panGestureHandlerProps = ['activeOffsetY', 'activeOffsetX', 'failOffsetY', 'failOffsetX', 'minDist', 'minVelocity', 'minVelocityX', 'minVelocityY', 'minPointers', 'maxPointers', 'avgTouches', 'enableTrackpadTwoFingerGesture', 'activateAfterLongPress'];
exports.panGestureHandlerProps = panGestureHandlerProps;
var panGestureHandlerCustomNativeProps = ['activeOffsetYStart', 'activeOffsetYEnd', 'activeOffsetXStart', 'activeOffsetXEnd', 'failOffsetYStart', 'failOffsetYEnd', 'failOffsetXStart', 'failOffsetXEnd'];
exports.panGestureHandlerCustomNativeProps = panGestureHandlerCustomNativeProps;
var panHandlerName = 'PanGestureHandler';
exports.panHandlerName = panHandlerName;
var PanGestureHandler = (0, _createHandler.default)({
  name: panHandlerName,
  allowedProps: [].concat((0, _toConsumableArray2.default)(_gestureHandlerCommon.baseGestureHandlerProps), panGestureHandlerProps),
  config: {},
  transformProps: managePanProps,
  customNativeProps: panGestureHandlerCustomNativeProps
});
exports.PanGestureHandler = PanGestureHandler;
function validatePanGestureHandlerProps(props) {
  if (Array.isArray(props.activeOffsetX) && (props.activeOffsetX[0] > 0 || props.activeOffsetX[1] < 0)) {
    throw new Error("First element of activeOffsetX should be negative, a the second one should be positive");
  }
  if (Array.isArray(props.activeOffsetY) && (props.activeOffsetY[0] > 0 || props.activeOffsetY[1] < 0)) {
    throw new Error("First element of activeOffsetY should be negative, a the second one should be positive");
  }
  if (Array.isArray(props.failOffsetX) && (props.failOffsetX[0] > 0 || props.failOffsetX[1] < 0)) {
    throw new Error("First element of failOffsetX should be negative, a the second one should be positive");
  }
  if (Array.isArray(props.failOffsetY) && (props.failOffsetY[0] > 0 || props.failOffsetY[1] < 0)) {
    throw new Error("First element of failOffsetY should be negative, a the second one should be positive");
  }
  if (props.minDist && (props.failOffsetX || props.failOffsetY)) {
    throw new Error("It is not supported to use minDist with failOffsetX or failOffsetY, use activeOffsetX and activeOffsetY instead");
  }
  if (props.minDist && (props.activeOffsetX || props.activeOffsetY)) {
    throw new Error("It is not supported to use minDist with activeOffsetX or activeOffsetY");
  }
}
function transformPanGestureHandlerProps(props) {
  var res = Object.assign({}, props);
  if (props.activeOffsetX !== undefined) {
    delete res.activeOffsetX;
    if (Array.isArray(props.activeOffsetX)) {
      res.activeOffsetXStart = props.activeOffsetX[0];
      res.activeOffsetXEnd = props.activeOffsetX[1];
    } else if (props.activeOffsetX < 0) {
      res.activeOffsetXStart = props.activeOffsetX;
    } else {
      res.activeOffsetXEnd = props.activeOffsetX;
    }
  }
  if (props.activeOffsetY !== undefined) {
    delete res.activeOffsetY;
    if (Array.isArray(props.activeOffsetY)) {
      res.activeOffsetYStart = props.activeOffsetY[0];
      res.activeOffsetYEnd = props.activeOffsetY[1];
    } else if (props.activeOffsetY < 0) {
      res.activeOffsetYStart = props.activeOffsetY;
    } else {
      res.activeOffsetYEnd = props.activeOffsetY;
    }
  }
  if (props.failOffsetX !== undefined) {
    delete res.failOffsetX;
    if (Array.isArray(props.failOffsetX)) {
      res.failOffsetXStart = props.failOffsetX[0];
      res.failOffsetXEnd = props.failOffsetX[1];
    } else if (props.failOffsetX < 0) {
      res.failOffsetXStart = props.failOffsetX;
    } else {
      res.failOffsetXEnd = props.failOffsetX;
    }
  }
  if (props.failOffsetY !== undefined) {
    delete res.failOffsetY;
    if (Array.isArray(props.failOffsetY)) {
      res.failOffsetYStart = props.failOffsetY[0];
      res.failOffsetYEnd = props.failOffsetY[1];
    } else if (props.failOffsetY < 0) {
      res.failOffsetYStart = props.failOffsetY;
    } else {
      res.failOffsetYEnd = props.failOffsetY;
    }
  }
  return res;
}
function managePanProps(props) {
  if (__DEV__) {
    validatePanGestureHandlerProps(props);
  }
  return transformPanGestureHandlerProps(props);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmRsZXJQcm9wcyIsInBhbkdlc3R1cmVIYW5kbGVyQ3VzdG9tTmF0aXZlUHJvcHMiLCJwYW5IYW5kbGVyTmFtZSIsIlBhbkdlc3R1cmVIYW5kbGVyIiwibmFtZSIsImFsbG93ZWRQcm9wcyIsImJhc2VHZXN0dXJlSGFuZGxlclByb3BzIiwiY29uZmlnIiwidHJhbnNmb3JtUHJvcHMiLCJtYW5hZ2VQYW5Qcm9wcyIsImN1c3RvbU5hdGl2ZVByb3BzIiwidmFsaWRhdGVQYW5HZXN0dXJlSGFuZGxlclByb3BzIiwicHJvcHMiLCJBcnJheSIsImlzQXJyYXkiLCJhY3RpdmVPZmZzZXRYIiwiRXJyb3IiLCJhY3RpdmVPZmZzZXRZIiwiZmFpbE9mZnNldFgiLCJmYWlsT2Zmc2V0WSIsIm1pbkRpc3QiLCJ0cmFuc2Zvcm1QYW5HZXN0dXJlSGFuZGxlclByb3BzIiwicmVzIiwidW5kZWZpbmVkIiwiYWN0aXZlT2Zmc2V0WFN0YXJ0IiwiYWN0aXZlT2Zmc2V0WEVuZCIsImFjdGl2ZU9mZnNldFlTdGFydCIsImFjdGl2ZU9mZnNldFlFbmQiLCJmYWlsT2Zmc2V0WFN0YXJ0IiwiZmFpbE9mZnNldFhFbmQiLCJmYWlsT2Zmc2V0WVN0YXJ0IiwiZmFpbE9mZnNldFlFbmQiLCJfX0RFVl9fIl0sInNvdXJjZXMiOlsiUGFuR2VzdHVyZUhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUhhbmRsZXIgZnJvbSAnLi9jcmVhdGVIYW5kbGVyJztcbmltcG9ydCB7XG4gIEJhc2VHZXN0dXJlSGFuZGxlclByb3BzLFxuICBiYXNlR2VzdHVyZUhhbmRsZXJQcm9wcyxcbn0gZnJvbSAnLi9nZXN0dXJlSGFuZGxlckNvbW1vbic7XG5cbmV4cG9ydCBjb25zdCBwYW5HZXN0dXJlSGFuZGxlclByb3BzID0gW1xuICAnYWN0aXZlT2Zmc2V0WScsXG4gICdhY3RpdmVPZmZzZXRYJyxcbiAgJ2ZhaWxPZmZzZXRZJyxcbiAgJ2ZhaWxPZmZzZXRYJyxcbiAgJ21pbkRpc3QnLFxuICAnbWluVmVsb2NpdHknLFxuICAnbWluVmVsb2NpdHlYJyxcbiAgJ21pblZlbG9jaXR5WScsXG4gICdtaW5Qb2ludGVycycsXG4gICdtYXhQb2ludGVycycsXG4gICdhdmdUb3VjaGVzJyxcbiAgJ2VuYWJsZVRyYWNrcGFkVHdvRmluZ2VyR2VzdHVyZScsXG4gICdhY3RpdmF0ZUFmdGVyTG9uZ1ByZXNzJyxcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBwYW5HZXN0dXJlSGFuZGxlckN1c3RvbU5hdGl2ZVByb3BzID0gW1xuICAnYWN0aXZlT2Zmc2V0WVN0YXJ0JyxcbiAgJ2FjdGl2ZU9mZnNldFlFbmQnLFxuICAnYWN0aXZlT2Zmc2V0WFN0YXJ0JyxcbiAgJ2FjdGl2ZU9mZnNldFhFbmQnLFxuICAnZmFpbE9mZnNldFlTdGFydCcsXG4gICdmYWlsT2Zmc2V0WUVuZCcsXG4gICdmYWlsT2Zmc2V0WFN0YXJ0JyxcbiAgJ2ZhaWxPZmZzZXRYRW5kJyxcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkID0ge1xuICAvKipcbiAgICogWCBjb29yZGluYXRlIG9mIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBwb2ludGVyIChmaW5nZXIgb3IgYSBsZWFkaW5nXG4gICAqIHBvaW50ZXIgd2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgZmluZ2VycyBwbGFjZWQpIHJlbGF0aXZlIHRvIHRoZSB2aWV3XG4gICAqIGF0dGFjaGVkIHRvIHRoZSBoYW5kbGVyLiBFeHByZXNzZWQgaW4gcG9pbnQgdW5pdHMuXG4gICAqL1xuICB4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFkgY29vcmRpbmF0ZSBvZiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgcG9pbnRlciAoZmluZ2VyIG9yIGEgbGVhZGluZ1xuICAgKiBwb2ludGVyIHdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGZpbmdlcnMgcGxhY2VkKSByZWxhdGl2ZSB0byB0aGUgdmlld1xuICAgKiBhdHRhY2hlZCB0byB0aGUgaGFuZGxlci4gRXhwcmVzc2VkIGluIHBvaW50IHVuaXRzLlxuICAgKi9cbiAgeTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBYIGNvb3JkaW5hdGUgb2YgdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIHBvaW50ZXIgKGZpbmdlciBvciBhIGxlYWRpbmdcbiAgICogcG9pbnRlciB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBmaW5nZXJzIHBsYWNlZCkgcmVsYXRpdmUgdG8gdGhlIHdpbmRvdy5cbiAgICogVGhlIHZhbHVlIGlzIGV4cHJlc3NlZCBpbiBwb2ludCB1bml0cy4gSXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIGl0IGluc3RlYWRcbiAgICogb2YgYHhgIGluIGNhc2VzIHdoZW4gdGhlIG9yaWdpbmFsIHZpZXcgY2FuIGJlIHRyYW5zZm9ybWVkIGFzIGFuIGVmZmVjdCBvZlxuICAgKiB0aGUgZ2VzdHVyZS5cbiAgICovXG4gIGFic29sdXRlWDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBZIGNvb3JkaW5hdGUgb2YgdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIHBvaW50ZXIgKGZpbmdlciBvciBhIGxlYWRpbmdcbiAgICogcG9pbnRlciB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBmaW5nZXJzIHBsYWNlZCkgcmVsYXRpdmUgdG8gdGhlIHdpbmRvdy5cbiAgICogVGhlIHZhbHVlIGlzIGV4cHJlc3NlZCBpbiBwb2ludCB1bml0cy4gSXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIGl0IGluc3RlYWRcbiAgICogb2YgYHlgIGluIGNhc2VzIHdoZW4gdGhlIG9yaWdpbmFsIHZpZXcgY2FuIGJlIHRyYW5zZm9ybWVkIGFzIGFuXG4gICAqIGVmZmVjdCBvZiB0aGUgZ2VzdHVyZS5cbiAgICovXG4gIGFic29sdXRlWTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGlvbiBvZiB0aGUgcGFuIGdlc3R1cmUgYWxvbmcgWCBheGlzIGFjY3VtdWxhdGVkIG92ZXIgdGhlIHRpbWUgb2ZcbiAgICogdGhlIGdlc3R1cmUuIFRoZSB2YWx1ZSBpcyBleHByZXNzZWQgaW4gdGhlIHBvaW50IHVuaXRzLlxuICAgKi9cbiAgdHJhbnNsYXRpb25YOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0aW9uIG9mIHRoZSBwYW4gZ2VzdHVyZSBhbG9uZyBZIGF4aXMgYWNjdW11bGF0ZWQgb3ZlciB0aGUgdGltZSBvZlxuICAgKiB0aGUgZ2VzdHVyZS4gVGhlIHZhbHVlIGlzIGV4cHJlc3NlZCBpbiB0aGUgcG9pbnQgdW5pdHMuXG4gICAqL1xuICB0cmFuc2xhdGlvblk6IG51bWJlcjtcblxuICAvKipcbiAgICogVmVsb2NpdHkgb2YgdGhlIHBhbiBnZXN0dXJlIGFsb25nIHRoZSBYIGF4aXMgaW4gdGhlIGN1cnJlbnQgbW9tZW50LiBUaGVcbiAgICogdmFsdWUgaXMgZXhwcmVzc2VkIGluIHBvaW50IHVuaXRzIHBlciBzZWNvbmQuXG4gICAqL1xuICB2ZWxvY2l0eVg6IG51bWJlcjtcblxuICAvKipcbiAgICogVmVsb2NpdHkgb2YgdGhlIHBhbiBnZXN0dXJlIGFsb25nIHRoZSBZIGF4aXMgaW4gdGhlIGN1cnJlbnQgbW9tZW50LiBUaGVcbiAgICogdmFsdWUgaXMgZXhwcmVzc2VkIGluIHBvaW50IHVuaXRzIHBlciBzZWNvbmQuXG4gICAqL1xuICB2ZWxvY2l0eVk6IG51bWJlcjtcbn07XG5cbmludGVyZmFjZSBDb21tb25QYW5Qcm9wZXJ0aWVzIHtcbiAgLyoqXG4gICAqIE1pbmltdW0gZGlzdGFuY2UgdGhlIGZpbmdlciAob3IgbXVsdGlwbGUgZmluZ2VyKSBuZWVkIHRvIHRyYXZlbCBiZWZvcmUgdGhlXG4gICAqIGhhbmRsZXIgYWN0aXZhdGVzLiBFeHByZXNzZWQgaW4gcG9pbnRzLlxuICAgKi9cbiAgbWluRGlzdD86IG51bWJlcjtcblxuICAvKipcbiAgICogQW5kcm9pZCBvbmx5LlxuICAgKi9cbiAgYXZnVG91Y2hlcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdHdvLWZpbmdlciBnZXN0dXJlcyBvbiBzdXBwb3J0ZWQgZGV2aWNlcywgZm9yIGV4YW1wbGUgaVBhZHMgd2l0aFxuICAgKiB0cmFja3BhZHMuIElmIG5vdCBlbmFibGVkIHRoZSBnZXN0dXJlIHdpbGwgcmVxdWlyZSBjbGljayArIGRyYWcsIHdpdGhcbiAgICogZW5hYmxlVHJhY2twYWRUd29GaW5nZXJHZXN0dXJlIHN3aXBpbmcgd2l0aCB0d28gZmluZ2VycyB3aWxsIGFsc28gdHJpZ2dlclxuICAgKiB0aGUgZ2VzdHVyZS5cbiAgICovXG4gIGVuYWJsZVRyYWNrcGFkVHdvRmluZ2VyR2VzdHVyZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgbnVtYmVyIG9mIGZpbmdlcnMgdGhhdCBpcyByZXF1aXJlZCB0byBiZSBwbGFjZWQgYmVmb3JlIGhhbmRsZXIgY2FuXG4gICAqIGFjdGl2YXRlLiBTaG91bGQgYmUgYSBoaWdoZXIgb3IgZXF1YWwgdG8gMCBpbnRlZ2VyLlxuICAgKi9cbiAgbWluUG9pbnRlcnM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGdpdmVuIG51bWJlciBvZiBmaW5nZXJzIGlzIHBsYWNlZCBvbiB0aGUgc2NyZWVuIGFuZCBoYW5kbGVyIGhhc24ndFxuICAgKiB5ZXQgYWN0aXZhdGVkIGl0IHdpbGwgZmFpbCByZWNvZ25pemluZyB0aGUgZ2VzdHVyZS4gU2hvdWxkIGJlIGEgaGlnaGVyIG9yXG4gICAqIGVxdWFsIHRvIDAgaW50ZWdlci5cbiAgICovXG4gIG1heFBvaW50ZXJzPzogbnVtYmVyO1xuXG4gIG1pblZlbG9jaXR5PzogbnVtYmVyO1xuICBtaW5WZWxvY2l0eVg/OiBudW1iZXI7XG4gIG1pblZlbG9jaXR5WT86IG51bWJlcjtcbiAgYWN0aXZhdGVBZnRlckxvbmdQcmVzcz86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYW5HZXN0dXJlQ29uZmlnIGV4dGVuZHMgQ29tbW9uUGFuUHJvcGVydGllcyB7XG4gIGFjdGl2ZU9mZnNldFlTdGFydD86IG51bWJlcjtcbiAgYWN0aXZlT2Zmc2V0WUVuZD86IG51bWJlcjtcbiAgYWN0aXZlT2Zmc2V0WFN0YXJ0PzogbnVtYmVyO1xuICBhY3RpdmVPZmZzZXRYRW5kPzogbnVtYmVyO1xuICBmYWlsT2Zmc2V0WVN0YXJ0PzogbnVtYmVyO1xuICBmYWlsT2Zmc2V0WUVuZD86IG51bWJlcjtcbiAgZmFpbE9mZnNldFhTdGFydD86IG51bWJlcjtcbiAgZmFpbE9mZnNldFhFbmQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFuR2VzdHVyZUhhbmRsZXJQcm9wc1xuICBleHRlbmRzIEJhc2VHZXN0dXJlSGFuZGxlclByb3BzPFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkPixcbiAgICBDb21tb25QYW5Qcm9wZXJ0aWVzIHtcbiAgLyoqXG4gICAqIFJhbmdlIGFsb25nIFggYXhpcyAoaW4gcG9pbnRzKSB3aGVyZSBmaW5nZXJzIHRyYXZlbHMgd2l0aG91dCBhY3RpdmF0aW9uIG9mXG4gICAqIGhhbmRsZXIuIE1vdmluZyBvdXRzaWRlIG9mIHRoaXMgcmFuZ2UgaW1wbGllcyBhY3RpdmF0aW9uIG9mIGhhbmRsZXIuIFJhbmdlXG4gICAqIGNhbiBiZSBnaXZlbiBhcyBhbiBhcnJheSBvciBhIHNpbmdsZSBudW1iZXIuIElmIHJhbmdlIGlzIHNldCBhcyBhbiBhcnJheSxcbiAgICogZmlyc3QgdmFsdWUgbXVzdCBiZSBsb3dlciBvciBlcXVhbCB0byAwLCBhIHRoZSBzZWNvbmQgb25lIGhpZ2hlciBvciBlcXVhbFxuICAgKiB0byAwLiBJZiBvbmx5IG9uZSBudW1iZXIgYHBgIGlzIGdpdmVuIGEgcmFuZ2Ugb2YgYCgtaW5mLCBwKWAgd2lsbCBiZSB1c2VkXG4gICAqIGlmIGBwYCBpcyBoaWdoZXIgb3IgZXF1YWwgdG8gMCBhbmQgYCgtcCwgaW5mKWAgb3RoZXJ3aXNlLlxuICAgKi9cbiAgYWN0aXZlT2Zmc2V0WT86IG51bWJlciB8IG51bWJlcltdO1xuXG4gIC8qKlxuICAgKiBSYW5nZSBhbG9uZyBYIGF4aXMgKGluIHBvaW50cykgd2hlcmUgZmluZ2VycyB0cmF2ZWxzIHdpdGhvdXQgYWN0aXZhdGlvbiBvZlxuICAgKiBoYW5kbGVyLiBNb3Zpbmcgb3V0c2lkZSBvZiB0aGlzIHJhbmdlIGltcGxpZXMgYWN0aXZhdGlvbiBvZiBoYW5kbGVyLiBSYW5nZVxuICAgKiBjYW4gYmUgZ2l2ZW4gYXMgYW4gYXJyYXkgb3IgYSBzaW5nbGUgbnVtYmVyLiBJZiByYW5nZSBpcyBzZXQgYXMgYW4gYXJyYXksXG4gICAqIGZpcnN0IHZhbHVlIG11c3QgYmUgbG93ZXIgb3IgZXF1YWwgdG8gMCwgYSB0aGUgc2Vjb25kIG9uZSBoaWdoZXIgb3IgZXF1YWxcbiAgICogdG8gMC4gSWYgb25seSBvbmUgbnVtYmVyIGBwYCBpcyBnaXZlbiBhIHJhbmdlIG9mIGAoLWluZiwgcClgIHdpbGwgYmUgdXNlZFxuICAgKiBpZiBgcGAgaXMgaGlnaGVyIG9yIGVxdWFsIHRvIDAgYW5kIGAoLXAsIGluZilgIG90aGVyd2lzZS5cbiAgICovXG4gIGFjdGl2ZU9mZnNldFg/OiBudW1iZXIgfCBudW1iZXJbXTtcblxuICAvKipcbiAgICogV2hlbiB0aGUgZmluZ2VyIG1vdmVzIG91dHNpZGUgdGhpcyByYW5nZSAoaW4gcG9pbnRzKSBhbG9uZyBZIGF4aXMgYW5kXG4gICAqIGhhbmRsZXIgaGFzbid0IHlldCBhY3RpdmF0ZWQgaXQgd2lsbCBmYWlsIHJlY29nbml6aW5nIHRoZSBnZXN0dXJlLiBSYW5nZVxuICAgKiBjYW4gYmUgZ2l2ZW4gYXMgYW4gYXJyYXkgb3IgYSBzaW5nbGUgbnVtYmVyLiBJZiByYW5nZSBpcyBzZXQgYXMgYW4gYXJyYXksXG4gICAqIGZpcnN0IHZhbHVlIG11c3QgYmUgbG93ZXIgb3IgZXF1YWwgdG8gMCwgYSB0aGUgc2Vjb25kIG9uZSBoaWdoZXIgb3IgZXF1YWxcbiAgICogdG8gMC4gSWYgb25seSBvbmUgbnVtYmVyIGBwYCBpcyBnaXZlbiBhIHJhbmdlIG9mIGAoLWluZiwgcClgIHdpbGwgYmUgdXNlZFxuICAgKiBpZiBgcGAgaXMgaGlnaGVyIG9yIGVxdWFsIHRvIDAgYW5kIGAoLXAsIGluZilgIG90aGVyd2lzZS5cbiAgICovXG4gIGZhaWxPZmZzZXRZPzogbnVtYmVyIHwgbnVtYmVyW107XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGZpbmdlciBtb3ZlcyBvdXRzaWRlIHRoaXMgcmFuZ2UgKGluIHBvaW50cykgYWxvbmcgWCBheGlzIGFuZFxuICAgKiBoYW5kbGVyIGhhc24ndCB5ZXQgYWN0aXZhdGVkIGl0IHdpbGwgZmFpbCByZWNvZ25pemluZyB0aGUgZ2VzdHVyZS4gUmFuZ2VcbiAgICogY2FuIGJlIGdpdmVuIGFzIGFuIGFycmF5IG9yIGEgc2luZ2xlIG51bWJlci4gSWYgcmFuZ2UgaXMgc2V0IGFzIGFuIGFycmF5LFxuICAgKiBmaXJzdCB2YWx1ZSBtdXN0IGJlIGxvd2VyIG9yIGVxdWFsIHRvIDAsIGEgdGhlIHNlY29uZCBvbmUgaGlnaGVyIG9yIGVxdWFsXG4gICAqIHRvIDAuIElmIG9ubHkgb25lIG51bWJlciBgcGAgaXMgZ2l2ZW4gYSByYW5nZSBvZiBgKC1pbmYsIHApYCB3aWxsIGJlIHVzZWRcbiAgICogaWYgYHBgIGlzIGhpZ2hlciBvciBlcXVhbCB0byAwIGFuZCBgKC1wLCBpbmYpYCBvdGhlcndpc2UuXG4gICAqL1xuICBmYWlsT2Zmc2V0WD86IG51bWJlciB8IG51bWJlcltdO1xufVxuXG5leHBvcnQgY29uc3QgcGFuSGFuZGxlck5hbWUgPSAnUGFuR2VzdHVyZUhhbmRsZXInO1xuXG5leHBvcnQgdHlwZSBQYW5HZXN0dXJlSGFuZGxlciA9IHR5cGVvZiBQYW5HZXN0dXJlSGFuZGxlcjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVkZWNsYXJlIC0tIGJhY2t3YXJkIGNvbXBhdGliaWxpdHk7IHNlZSBkZXNjcmlwdGlvbiBvbiB0aGUgdG9wIG9mIGdlc3R1cmVIYW5kbGVyQ29tbW9uLnRzIGZpbGVcbmV4cG9ydCBjb25zdCBQYW5HZXN0dXJlSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXI8XG4gIFBhbkdlc3R1cmVIYW5kbGVyUHJvcHMsXG4gIFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkXG4+KHtcbiAgbmFtZTogcGFuSGFuZGxlck5hbWUsXG4gIGFsbG93ZWRQcm9wczogW1xuICAgIC4uLmJhc2VHZXN0dXJlSGFuZGxlclByb3BzLFxuICAgIC4uLnBhbkdlc3R1cmVIYW5kbGVyUHJvcHMsXG4gIF0gYXMgY29uc3QsXG4gIGNvbmZpZzoge30sXG4gIHRyYW5zZm9ybVByb3BzOiBtYW5hZ2VQYW5Qcm9wcyxcbiAgY3VzdG9tTmF0aXZlUHJvcHM6IHBhbkdlc3R1cmVIYW5kbGVyQ3VzdG9tTmF0aXZlUHJvcHMsXG59KTtcblxuZnVuY3Rpb24gdmFsaWRhdGVQYW5HZXN0dXJlSGFuZGxlclByb3BzKHByb3BzOiBQYW5HZXN0dXJlSGFuZGxlclByb3BzKSB7XG4gIGlmIChcbiAgICBBcnJheS5pc0FycmF5KHByb3BzLmFjdGl2ZU9mZnNldFgpICYmXG4gICAgKHByb3BzLmFjdGl2ZU9mZnNldFhbMF0gPiAwIHx8IHByb3BzLmFjdGl2ZU9mZnNldFhbMV0gPCAwKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmlyc3QgZWxlbWVudCBvZiBhY3RpdmVPZmZzZXRYIHNob3VsZCBiZSBuZWdhdGl2ZSwgYSB0aGUgc2Vjb25kIG9uZSBzaG91bGQgYmUgcG9zaXRpdmVgXG4gICAgKTtcbiAgfVxuXG4gIGlmIChcbiAgICBBcnJheS5pc0FycmF5KHByb3BzLmFjdGl2ZU9mZnNldFkpICYmXG4gICAgKHByb3BzLmFjdGl2ZU9mZnNldFlbMF0gPiAwIHx8IHByb3BzLmFjdGl2ZU9mZnNldFlbMV0gPCAwKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmlyc3QgZWxlbWVudCBvZiBhY3RpdmVPZmZzZXRZIHNob3VsZCBiZSBuZWdhdGl2ZSwgYSB0aGUgc2Vjb25kIG9uZSBzaG91bGQgYmUgcG9zaXRpdmVgXG4gICAgKTtcbiAgfVxuXG4gIGlmIChcbiAgICBBcnJheS5pc0FycmF5KHByb3BzLmZhaWxPZmZzZXRYKSAmJlxuICAgIChwcm9wcy5mYWlsT2Zmc2V0WFswXSA+IDAgfHwgcHJvcHMuZmFpbE9mZnNldFhbMV0gPCAwKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmlyc3QgZWxlbWVudCBvZiBmYWlsT2Zmc2V0WCBzaG91bGQgYmUgbmVnYXRpdmUsIGEgdGhlIHNlY29uZCBvbmUgc2hvdWxkIGJlIHBvc2l0aXZlYFxuICAgICk7XG4gIH1cblxuICBpZiAoXG4gICAgQXJyYXkuaXNBcnJheShwcm9wcy5mYWlsT2Zmc2V0WSkgJiZcbiAgICAocHJvcHMuZmFpbE9mZnNldFlbMF0gPiAwIHx8IHByb3BzLmZhaWxPZmZzZXRZWzFdIDwgMClcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEZpcnN0IGVsZW1lbnQgb2YgZmFpbE9mZnNldFkgc2hvdWxkIGJlIG5lZ2F0aXZlLCBhIHRoZSBzZWNvbmQgb25lIHNob3VsZCBiZSBwb3NpdGl2ZWBcbiAgICApO1xuICB9XG5cbiAgaWYgKHByb3BzLm1pbkRpc3QgJiYgKHByb3BzLmZhaWxPZmZzZXRYIHx8IHByb3BzLmZhaWxPZmZzZXRZKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJdCBpcyBub3Qgc3VwcG9ydGVkIHRvIHVzZSBtaW5EaXN0IHdpdGggZmFpbE9mZnNldFggb3IgZmFpbE9mZnNldFksIHVzZSBhY3RpdmVPZmZzZXRYIGFuZCBhY3RpdmVPZmZzZXRZIGluc3RlYWRgXG4gICAgKTtcbiAgfVxuXG4gIGlmIChwcm9wcy5taW5EaXN0ICYmIChwcm9wcy5hY3RpdmVPZmZzZXRYIHx8IHByb3BzLmFjdGl2ZU9mZnNldFkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEl0IGlzIG5vdCBzdXBwb3J0ZWQgdG8gdXNlIG1pbkRpc3Qgd2l0aCBhY3RpdmVPZmZzZXRYIG9yIGFjdGl2ZU9mZnNldFlgXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1QYW5HZXN0dXJlSGFuZGxlclByb3BzKHByb3BzOiBQYW5HZXN0dXJlSGFuZGxlclByb3BzKSB7XG4gIHR5cGUgSW50ZXJuYWxQYW5HSEtleXMgPVxuICAgIHwgJ2FjdGl2ZU9mZnNldFhTdGFydCdcbiAgICB8ICdhY3RpdmVPZmZzZXRYRW5kJ1xuICAgIHwgJ2ZhaWxPZmZzZXRYU3RhcnQnXG4gICAgfCAnZmFpbE9mZnNldFhFbmQnXG4gICAgfCAnYWN0aXZlT2Zmc2V0WVN0YXJ0J1xuICAgIHwgJ2FjdGl2ZU9mZnNldFlFbmQnXG4gICAgfCAnZmFpbE9mZnNldFlTdGFydCdcbiAgICB8ICdmYWlsT2Zmc2V0WUVuZCc7XG4gIHR5cGUgUGFuR2VzdHVyZUhhbmRsZXJJbnRlcm5hbFByb3BzID0gUGFuR2VzdHVyZUhhbmRsZXJQcm9wcyAmXG4gICAgUGFydGlhbDxSZWNvcmQ8SW50ZXJuYWxQYW5HSEtleXMsIG51bWJlcj4+O1xuXG4gIGNvbnN0IHJlczogUGFuR2VzdHVyZUhhbmRsZXJJbnRlcm5hbFByb3BzID0geyAuLi5wcm9wcyB9O1xuXG4gIGlmIChwcm9wcy5hY3RpdmVPZmZzZXRYICE9PSB1bmRlZmluZWQpIHtcbiAgICBkZWxldGUgcmVzLmFjdGl2ZU9mZnNldFg7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMuYWN0aXZlT2Zmc2V0WCkpIHtcbiAgICAgIHJlcy5hY3RpdmVPZmZzZXRYU3RhcnQgPSBwcm9wcy5hY3RpdmVPZmZzZXRYWzBdO1xuICAgICAgcmVzLmFjdGl2ZU9mZnNldFhFbmQgPSBwcm9wcy5hY3RpdmVPZmZzZXRYWzFdO1xuICAgIH0gZWxzZSBpZiAocHJvcHMuYWN0aXZlT2Zmc2V0WCA8IDApIHtcbiAgICAgIHJlcy5hY3RpdmVPZmZzZXRYU3RhcnQgPSBwcm9wcy5hY3RpdmVPZmZzZXRYO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuYWN0aXZlT2Zmc2V0WEVuZCA9IHByb3BzLmFjdGl2ZU9mZnNldFg7XG4gICAgfVxuICB9XG5cbiAgaWYgKHByb3BzLmFjdGl2ZU9mZnNldFkgIT09IHVuZGVmaW5lZCkge1xuICAgIGRlbGV0ZSByZXMuYWN0aXZlT2Zmc2V0WTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wcy5hY3RpdmVPZmZzZXRZKSkge1xuICAgICAgcmVzLmFjdGl2ZU9mZnNldFlTdGFydCA9IHByb3BzLmFjdGl2ZU9mZnNldFlbMF07XG4gICAgICByZXMuYWN0aXZlT2Zmc2V0WUVuZCA9IHByb3BzLmFjdGl2ZU9mZnNldFlbMV07XG4gICAgfSBlbHNlIGlmIChwcm9wcy5hY3RpdmVPZmZzZXRZIDwgMCkge1xuICAgICAgcmVzLmFjdGl2ZU9mZnNldFlTdGFydCA9IHByb3BzLmFjdGl2ZU9mZnNldFk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5hY3RpdmVPZmZzZXRZRW5kID0gcHJvcHMuYWN0aXZlT2Zmc2V0WTtcbiAgICB9XG4gIH1cblxuICBpZiAocHJvcHMuZmFpbE9mZnNldFggIT09IHVuZGVmaW5lZCkge1xuICAgIGRlbGV0ZSByZXMuZmFpbE9mZnNldFg7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMuZmFpbE9mZnNldFgpKSB7XG4gICAgICByZXMuZmFpbE9mZnNldFhTdGFydCA9IHByb3BzLmZhaWxPZmZzZXRYWzBdO1xuICAgICAgcmVzLmZhaWxPZmZzZXRYRW5kID0gcHJvcHMuZmFpbE9mZnNldFhbMV07XG4gICAgfSBlbHNlIGlmIChwcm9wcy5mYWlsT2Zmc2V0WCA8IDApIHtcbiAgICAgIHJlcy5mYWlsT2Zmc2V0WFN0YXJ0ID0gcHJvcHMuZmFpbE9mZnNldFg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5mYWlsT2Zmc2V0WEVuZCA9IHByb3BzLmZhaWxPZmZzZXRYO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9wcy5mYWlsT2Zmc2V0WSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVsZXRlIHJlcy5mYWlsT2Zmc2V0WTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wcy5mYWlsT2Zmc2V0WSkpIHtcbiAgICAgIHJlcy5mYWlsT2Zmc2V0WVN0YXJ0ID0gcHJvcHMuZmFpbE9mZnNldFlbMF07XG4gICAgICByZXMuZmFpbE9mZnNldFlFbmQgPSBwcm9wcy5mYWlsT2Zmc2V0WVsxXTtcbiAgICB9IGVsc2UgaWYgKHByb3BzLmZhaWxPZmZzZXRZIDwgMCkge1xuICAgICAgcmVzLmZhaWxPZmZzZXRZU3RhcnQgPSBwcm9wcy5mYWlsT2Zmc2V0WTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmZhaWxPZmZzZXRZRW5kID0gcHJvcHMuZmFpbE9mZnNldFk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hbmFnZVBhblByb3BzKHByb3BzOiBQYW5HZXN0dXJlSGFuZGxlclByb3BzKSB7XG4gIGlmIChfX0RFVl9fKSB7XG4gICAgdmFsaWRhdGVQYW5HZXN0dXJlSGFuZGxlclByb3BzKHByb3BzKTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtUGFuR2VzdHVyZUhhbmRsZXJQcm9wcyhwcm9wcyk7XG59XG4iXX0=